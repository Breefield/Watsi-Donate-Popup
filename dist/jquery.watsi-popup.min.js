/*
 *  <%= pkg.title || pkg.name %> - v<%= pkg.version %>
 *  <%= pkg.description %>
 *  <%= pkg.homepage %>
 *
 *  Made by <%= pkg.author.name %>
 *  Under <%= pkg.licenses[0].type %> License
 */
!function(a){function b(b,e){this.el=b,this.$el=a(b),this.options=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};var c="watsiDonatePopup",d={propertyName:"value"};b.prototype={init:function(){this.buildPopupElement(),this.loadPatients()},buildPopupElement:function(){var b='<div class="watsi-popup" class="arrow-bottom"><div class="info-bar section"><a href="https://watsi.org/" target="_blank"><img src="img/watsi-small.png" width="55"/></a><a class="more" href="https://watsi.org/" target="_blank">what is watsi?</a></div><div class="patient section cf"><h1 class="patient-title"></h1><img class="patient-photo" src=""/><p class="patient-summary"></p><a class="patient-more-link" href="" target="_blank">Donate</a></div></div>';this.$popup=a(b).insertBefore(this.$el)},loadPatients:function(){a.ajax("http://watsi-api-proxy.herokuapp.com/?url=https://watsi.org/fund-treatments.json",{dataType:"jsonp",success:a.proxy(function(a){this.renderProfile(a.profiles.randomElement()),this.$popup.addClass("loaded")},this)})},renderProfile:function(a){this.$popup.find(".patient-title").text("Fund "+a.name+"'s Treatment"),this.$popup.find(".patient-photo").attr("src",a.profile_url),this.$popup.find(".patient-summary").text(a.promo_description),this.$popup.find(".patient-more-link").attr("href",a.url)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);